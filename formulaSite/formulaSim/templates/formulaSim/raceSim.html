{% extends "formulaSim/home.html" %}
{% load formulaSim_extras %}

{% block mainContentBlock %}
	<h3> The RaceSim </h3>
	<br>

	<form class='get-race-form' method='POST' action="{% url 'formulaSim.views.raceSim' %}" enctype="multipart/form-data">
		{% csrf_token %}
		<span>{{ errorMessage }}</span>
		<ul>
			{{the_form.as_ul}}
		</ul>
		<button type="submit" name="submit" value="Get Race">Get Race</button>
	</form>

	
	{% if race %}
		<br>
		<h3>{{ race.name }}</h3>
		<h4>{{ race.date }}</h4>
		<h4>Race ID: {{ race.raceid}}</h4>
	{% endif %}
	{% if drivers %}
		<br>
		{{drivers_id}}
		<ul>
			{% for driver in drivers %}
				<li><h4>{{ driver.forename }} {{ driver.surname }} {{ driver.driverid }}</h4></li>
				<ul>
					meow
					{% comment %}
					{% for id in drivers_id %}
						{% for lap in laptimesdict.id %}
							<li> Lap {{ lap.lap }} time: {{ lap.time }}</li>
						{% endfor %}
					{% endfor %}
					{% endcomment%}

					{% for lap in race.raceid|get_laptime_list:driver.driverid %}
						<li> Lap {{ lap.lap }} time: {{ lap.time }}</li>
					{% endfor %}

				</ul>
			{% endfor %}
		</ul>
	{% endif %}



{% endblock mainContentBlock %}
